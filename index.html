<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ’•</title>
<style>
  /* åŸºç¡€æ ·å¼ä¿æŒä¸å˜ */
  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100vh;
    width: 100vw;
    background: linear-gradient(135deg, #dbeafe, #fce7f3);
    font-family: "Microsoft YaHei", sans-serif;
    position: relative;
  }

  .message {
    position: absolute;
    border-radius: 14px;
    padding: 10px 16px;
    background: white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    font-size: 14px;
    text-align: center;
    animation: fadeInUp 0.8s ease forwards;
    opacity: 0;
    display: none; /* åˆå§‹éšè—ï¼Œç­¾æ”¶åæ˜¾ç¤º */
  }

  .message::before {
    content: "ğŸ’– æç¤º";
    display: block;
    font-size: 11px;
    color: #ff4b91;
    margin-bottom: 4px;
  }

  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(10px) scale(0.9); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }

  .heart {
    position: absolute;
    color: #ff4b91;
    font-size: 18px;
    opacity: 0.9;
    transform: translate(-50%, -50%);
    animation: appear 4s ease-out forwards;
    display: none; /* åˆå§‹éšè—ï¼Œç­¾æ”¶åæ˜¾ç¤º */
  }

  @keyframes appear {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
    100% { opacity: 0.2; transform: translate(-50%, -50%) scale(0.9); }
  }

  .refresh-btn, .audio-btn {
    position: fixed;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 16px;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    display: none; /* åˆå§‹éšè—ï¼Œç­¾æ”¶åæ˜¾ç¤º */
  }

  .refresh-btn {
    bottom: 20px;
    right: 20px;
    background: #f9a8d4;
  }

  .refresh-btn:hover {
    transform: scale(1.05);
    background: #f472b6;
  }

  .audio-btn {
    bottom: 20px;
    left: 20px;
    background: #60a5fa;
    padding: 10px 14px;
  }

  .audio-btn:hover {
    transform: scale(1.05);
    background: #3b82f6;
  }

  /* æ–°å¢ï¼šç¤¼ç‰©ç­¾æ”¶å¼¹çª—æ ·å¼ */
  .gift-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.95);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  .gift-icon {
    font-size: 60px;
    margin-bottom: 20px;
    animation: bounce 1.5s infinite;
  }

  @keyframes bounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  .gift-text {
    font-size: 22px;
    color: #ff4b91;
    margin-bottom: 30px;
    text-align: center;
    padding: 0 20px;
  }

  .gift-btn {
    background: #ff4b91;
    color: white;
    border: none;
    border-radius: 30px;
    padding: 12px 36px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 75, 145, 0.3);
    transition: all 0.3s ease;
  }

  .gift-btn:hover {
    background: #f43f86;
    transform: scale(1.05);
  }
</style>
</head>
<body>
<!-- 1. åˆå§‹æ˜¾ç¤ºï¼šç¤¼ç‰©ç­¾æ”¶å¼¹çª— -->
<div class="gift-modal" id="giftModal">
  <div class="gift-icon">ğŸ</div>
  <div class="gift-text">ä½ æœ‰ä¸€ä»½æš–å¿ƒç¤¼ç‰©éœ€è¦ç­¾æ”¶ï¼Œæ˜¯å¦æ‰“å¼€ï¼Ÿ</div>
  <button class="gift-btn" id="acceptGift">æ˜¯çš„ï¼Œç­¾æ”¶ç¤¼ç‰©</button>
</div>

<!-- 2. ç­¾æ”¶åæ˜¾ç¤ºï¼šé¡µé¢æ ¸å¿ƒå†…å®¹ï¼ˆåˆå§‹éšè—ï¼‰ -->
<button class="refresh-btn" onclick="restartMessages()">ğŸŒ¸ æ¢ä¸€æ‰¹æç¤º</button>
<button class="audio-btn" id="audioToggle" aria-label="æ’­æ”¾èƒŒæ™¯éŸ³ä¹" title="æ’­æ”¾/æš‚åœèƒŒæ™¯éŸ³ä¹">â¸ï¸</button>

<script>
  const messages = [
    "æ„¿ä½ æ¯å¤©éƒ½è¢«çˆ±åŒ…å›´ ğŸ’•","è®°å¾—åƒæ—©é¤å“¦ ğŸ","å¤šå–çƒ­æ°´ï¼Œå°‘ç†¬å¤œ ğŸ’§","ä½ ç¬‘èµ·æ¥çœŸå¥½çœ‹ ğŸ˜„",
    "åšè‡ªå·±å°±å¾ˆç¾ âœ¨","ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ â˜€ï¸","ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥ ğŸŒˆ","ä¿æŒå¾®ç¬‘ ğŸ˜Š",
    "ä½ å€¼å¾—è¢«æ¸©æŸ”ä»¥å¾… ğŸŒ·","ç”Ÿæ´»ä¼šè¶Šæ¥è¶Šç”œ ğŸ¬","çˆ±è‡ªå·±æ˜¯ç»ˆèº«æµªæ¼«çš„å¼€å§‹ ğŸ’–",
    "å‹‡æ•¢ä¸€ç‚¹ï¼Œæ²¡æœ‰è¿‡ä¸å»çš„å ğŸŒ»","åˆ«å¤ªç´¯ï¼Œæ…¢ä¸€ç‚¹ä¹Ÿæ²¡å…³ç³» ğŸ’«","ç¥ä½ æ¯æ™šéƒ½å¥½æ¢¦ ğŸ’¤",
    "å¥½è¿æ­£åœ¨è·¯ä¸Š ğŸ€","è¦ç›¸ä¿¡è‡ªå·± ğŸ¦‹","ä½ çš„åŠªåŠ›ç»ˆä¼šå‘å…‰ âœ¨","ä»Šå¤©çš„ä½ æ¯”æ˜¨å¤©æ›´æ£’ ğŸ’ª",
    "æ¸©æŸ”åœ°å¯¹å¾…ä¸–ç•Œ ğŸŒ¸","æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº ğŸŒ ","å¯çˆ±çš„äººå¥½è¿éƒ½ä¸ä¼šå¤ªå·® ğŸ“",
    "ä½ å·²ç»å¾ˆåŠªåŠ›å•¦ â¤ï¸","å¸Œæœ›ä½ æ¯å¤©éƒ½å¼€å¼€å¿ƒå¿ƒ ğŸ˜Š","ä¸å¼€å¿ƒä¹Ÿæ²¡å…³ç³»ï¼ŒæŠ±æŠ±ä½  ğŸ¤—",
    "å¤©å†·å¤šç©¿è¡£æœ ğŸ§£","å–ç‚¹çƒ­å¥¶èŒ¶å§ â˜•","è¢«çˆ±åŒ…å›´çš„æ„Ÿè§‰çœŸå¥½ ğŸ’˜",
    "æœªæ¥ä¼šæœ‰å¾ˆå¤šæƒŠå–œ âœ¨","åˆ«å®³æ€•ï¼Œéƒ½ä¼šè¿‡å»çš„ ğŸŒˆ","ä½ æ˜¯ç‹¬ä¸€æ— äºŒçš„ ğŸŒŸ",
    "å¿ƒæ€€æµªæ¼«ï¼Œçƒ­çˆ±ç”Ÿæ´» ğŸ’","ç›¸ä¿¡å¥‡è¿¹å§ ğŸŒ ","æ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿« ğŸ¢",
    "å–œæ¬¢è‡ªå·±æ¯ä¸€ä¸ªæ ·å­ ğŸ’‹","çˆ±ä¼šæ¥çš„ ğŸ’•","ä»Šå¤©ä¹Ÿè¦å¤šå¤¸å¤¸è‡ªå·± ğŸ‘‘",
    "æŠŠæ¸©æŸ”ç•™ç»™å€¼å¾—çš„äºº ğŸŒ·","ä½ å€¼å¾—æ›´å¥½çš„ç”Ÿæ´» ğŸŒ»","å¤©ä¸Šæœ‰æ˜Ÿæ˜Ÿï¼Œäººé—´æœ‰ä½  âœ¨",
    "æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾… ğŸŒ¸","åˆ«æ‹…å¿ƒï¼Œä¸€åˆ‡é¡ºåˆ© ğŸ€","ä½ é—ªé—ªå‘å…‰çš„æ ·å­çœŸè¿·äºº ğŸ’«",
    "ç”Ÿæ´»æœ‰ç‚¹è‹¦ï¼Œä½†ä½ æ˜¯ç”œçš„ ğŸ¬","æ„¿ä½ å¿ƒä¸­æœ‰å…‰ ğŸŒŸ","æ¯ä¸€å¤©éƒ½å€¼å¾—æœŸå¾… ğŸŒˆ",
    "ä¸–ç•Œä¼šå› ä¸ºä½ æ›´å¯çˆ± ğŸ’–","æ”¾è½»æ¾ï¼Œå¸æ°”å‘¼æ°” ğŸ§˜â€â™€ï¸","åŠªåŠ›ä½†åˆ«å¤ªç´§ç»· ğŸ’ª",
    "æ™šé£å¹æ¥æ¸©æŸ” ğŸŒ™","ä½ æ˜¯äººé—´å®è— ğŸ’","æ˜å¤©ä¼šæ›´å¥½ ğŸŒ",
    "ä¸å¿…å®Œç¾ï¼Œåªéœ€çœŸå® â¤ï¸","å–„è‰¯æ˜¯ä½ æœ€å¥½çš„æ ·å­ ğŸŒ»","åšä¸ªæ¸©æŸ”ä¸”åšå®šçš„äºº ğŸ’•",
    "ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ· ğŸŒŠ","ç›¸ä¿¡çˆ±ä¸ç¾å¥½ ğŸ’","åˆ«å¿˜äº†å–æ°´ ğŸ’§",
    "é˜³å…‰åœ¨ç­‰ä½  â˜€ï¸","æ„¿ä½ æ‰€é‡çš†æ¸©æŸ” ğŸŒˆ","å°å¹¸è¿åœ¨è·¯ä¸Š ğŸ€",
    "ä½ æœ¬èº«å°±æ˜¯å…‰ ğŸŒŸ","å¾®ç¬‘æ˜¯ä¸€ç§é­”æ³• ğŸ˜Š","å¹¸ç¦å…¶å®å¾ˆè¿‘ ğŸ’–",
    "æ‰€æœ‰æ¸©æŸ”éƒ½åœ¨è·¯ä¸Š ğŸš—","ä½ åœ¨åŠªåŠ›çš„æ ·å­çœŸå¥½ ğŸ’«","ä»Šå¤©ä¹Ÿè¦å¥½å¿ƒæƒ… ğŸµ",
    "ä¸ç®¡å¤šè¿œï¼Œæˆ‘éƒ½ç¥ä½ å¿«ä¹ ğŸŒ¸","ç»™è‡ªå·±ä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ± ğŸ¤—","è¦åšè‡ªå·±çš„å°å¤ªé˜³ â˜€ï¸",
    "çˆ±æ˜¯ä¸€ç§èƒ½é‡ ğŸ’“","è¶ŠåŠªåŠ›è¶Šå¹¸è¿ ğŸ€","åˆ«å¿˜äº†ç”Ÿæ´»çš„ç¾å¥½ ğŸˆ",
    "ä½ æ˜¯å®‡å®™é€æ¥çš„æƒŠå–œ âœ¨","æ¸©æŸ”çš„äººæœ‰å¥½è¿ ğŸŒ·","ä¿æŒæµªæ¼« ğŸ’",
    "è®°å¾—ä¼‘æ¯ ğŸŒ™","ä¸€åˆ‡åˆšåˆšå¥½ â¤ï¸","å¹¸ç¦ä¼šæ¥çš„ ğŸ°",
    "çˆ±åœ¨ç©ºæ°”ä¸­é£˜è¡ ğŸŒ¸","ä½ å€¼å¾—ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç¾å¥½ ğŸŒ","å¤šç¬‘ç¬‘ï¼Œçƒ¦æ¼å°±è·‘æ‰ ğŸ˜†",
    "ä½ å¾ˆå¥½ï¼Œä¸å¿…æ”¹å˜ ğŸ’–","æ”¾æ¾å¿ƒæƒ…ï¼Œè¿æ¥æ–°ä¸€å¤© ğŸŒ","è®°å¾—å¤šæ‹å‡ å¼ ç…§ç‰‡ ğŸ“¸",
    "æ˜¥å¤©æ€»ä¼šæ¥çš„ ğŸŒ·","è¯·ç›¸ä¿¡è‡ªå·±çš„å…‰ ğŸ’«","ä½ æ¯”æƒ³è±¡ä¸­æ›´åšå¼º ğŸ’ª",
    "æˆ‘å¸Œæœ›ä½ æ¯å¤©éƒ½å¿«ä¹ â¤ï¸","é£ä¼šå¹æ¥å¥½è¿ ğŸƒ","ä½ æ˜¯è¢«ç¥ç¦çš„äºº ğŸŒˆ",
    "äººç”Ÿå¾ˆçŸ­ï¼Œåˆ«å¿˜äº†å¼€å¿ƒ ğŸŒ¸","ç¡å‰åŸè°…ä¸€åˆ‡ ğŸ’¤","æ˜å¤©ä¼šæ›´ç¾å¥½ â˜€ï¸",
    "ä½ å€¼å¾—æ‹¥æœ‰æœ€å¥½çš„ ğŸ’–","ç¬‘ä¸€ç¬‘ï¼Œæ²¡ä»€ä¹ˆå¤§ä¸äº† ğŸ˜„","ä»Šå¤©ä¹Ÿè¦å¥½å¥½ç”Ÿæ´» ğŸŒ»",
    "æ„¿ä½ å¹³å®‰å–œä¹ ğŸ’•","è°¢è°¢ä½ å‡ºç°åœ¨è¿™ä¸ªä¸–ç•Œä¸Š ğŸŒ","ä¿æŒå¯çˆ± ğŸ’«"
  ]; // å…±99æ¡

  const colors = ["#ffe4e6", "#e0f2fe", "#fef9c3", "#fce7f3", "#dcfce7"];
  const modal = document.getElementById("giftModal");
  const acceptBtn = document.getElementById("acceptGift");
  let pageLoaded = false; // æ ‡è®°é¡µé¢æ˜¯å¦å·²åŠ è½½

  // åˆ›å»ºæš–å¿ƒæç¤ºï¼ˆä»…ç­¾æ”¶åæ‰§è¡Œï¼‰
  function createMessage(text) {
    const msg = document.createElement("div");
    msg.className = "message";
    msg.innerText = text;
    const x = Math.random() * (window.innerWidth - 180);
    const y = Math.random() * (window.innerHeight - 100);
    msg.style.left = `${x}px`;
    msg.style.top = `${y}px`;
    msg.style.background = colors[Math.floor(Math.random() * colors.length)];
    msg.style.display = "block"; // ç­¾æ”¶åæ˜¾ç¤º
    document.body.appendChild(msg);
  }

  // åˆ›å»ºçˆ±å¿ƒï¼ˆä»…ç­¾æ”¶åæ‰§è¡Œï¼‰
  function createHeart(x, y, delay = 0) {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "â¤ï¸";
    heart.style.left = `${x}px`;
    heart.style.top = `${y}px`;
    heart.style.animationDelay = `${delay}s`;
    heart.style.display = "block"; // ç­¾æ”¶åæ˜¾ç¤º
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 4000 + delay * 1000);
  }

  // ç”Ÿæˆçˆ±å¿ƒè·¯å¾„å¹¶æ˜¾ç¤ºæç¤ºï¼ˆä»…ç­¾æ”¶åæ‰§è¡Œï¼‰
  function heartPath() {
    if (!pageLoaded) return;
    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;
    const scale = Math.min(window.innerWidth, window.innerHeight) / 50;

    const points = [];
    for (let t = 0; t < Math.PI * 2; t += 0.04) {
      const x = centerX + scale * 16 * Math.pow(Math.sin(t), 3);
      const y = centerY - scale * (
        13 * Math.cos(t) -
        5 * Math.cos(2 * t) -
        2 * Math.cos(3 * t) -
        Math.cos(4 * t)
      );
      points.push({ x, y });
    }

    points.forEach((p, i) => setTimeout(() => createHeart(p.x, p.y), i * 40));
    setTimeout(showMessages, points.length * 40 + 1500);
  }

  // æ˜¾ç¤ºæ‰€æœ‰æš–å¿ƒæç¤ºï¼ˆä»…ç­¾æ”¶åæ‰§è¡Œï¼‰
  function showMessages() {
    if (!pageLoaded) return;
    messages.forEach((text, i) => {
      setTimeout(() => createMessage(text), 250 * i);
    });
  }

  // åˆ·æ–°æç¤ºï¼ˆä»…ç­¾æ”¶åå¯ç”¨ï¼‰
  function restartMessages() {
    if (!pageLoaded) return;
    document.querySelectorAll(".message").forEach(m => m.remove());
    showMessages();
  }

  // æ ¸å¿ƒï¼šç­¾æ”¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆè§¦å‘éŸ³ä¹+æ˜¾ç¤ºé¡µé¢ï¼‰
  acceptBtn.addEventListener("click", function() {
    // 1. éšè—ç­¾æ”¶å¼¹çª—
    modal.style.display = "none";
    // 2. æ˜¾ç¤ºé¡µé¢åŠŸèƒ½æŒ‰é’®
    document.querySelector(".refresh-btn").style.display = "block";
    document.querySelector(".audio-btn").style.display = "block";
    // 3. æ ‡è®°é¡µé¢åŠ è½½å®Œæˆ
    pageLoaded = true;
    // 4. å¯åŠ¨èƒŒæ™¯éŸ³ä¹ï¼ˆæ­¤æ—¶æœ‰ç”¨æˆ·ç‚¹å‡»ï¼Œæµè§ˆå™¨å…è®¸æ’­æ”¾ï¼‰
    initAudio();
    // 5. åŠ è½½çˆ±å¿ƒåŠ¨ç”»å’Œæš–å¿ƒæç¤º
    heartPath();
  });

  // èƒŒæ™¯éŸ³ä¹åˆå§‹åŒ–ï¼ˆä»…ç­¾æ”¶åæ‰§è¡Œï¼‰
  function initAudio() {
    const audioSrc = "music/å¥³å­©DJ-å°ä¹å„¿%232pofE9.mp3";
    const audio = new Audio(audioSrc);
    const btn = document.getElementById("audioToggle");
    
    audio.loop = true;
    audio.preload = "auto";
    audio.volume = 0.6;
    audio.play().catch(err => {
      console.error("éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼š", err);
      alert("éŸ³é¢‘æ— æ³•æ’­æ”¾ï¼Œå¯èƒ½æ˜¯è·¯å¾„é”™è¯¯");
    });

    // éŸ³é¢‘æŒ‰é’®æ§åˆ¶
    btn.addEventListener("click", function() {
      if (audio.paused) {
        audio.play();
        btn.innerText = "â¸ï¸";
      } else {
        audio.pause();
        btn.innerText = "ğŸ”ˆ";
      }
    });

    // åŒæ­¥æŒ‰é’®çŠ¶æ€
    audio.addEventListener("play", () => btn.innerText = "â¸ï¸");
    audio.addEventListener("pause", () => btn.innerText = "ğŸ”ˆ");
  }
</script>
</body>
</html>